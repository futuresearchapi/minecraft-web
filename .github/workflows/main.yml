name: Download, Extract, and Edit Config

on:
  schedule:
    - cron: '0 0 */2 * *'  # Every 2 days at midnight UTC
  workflow_dispatch:    # Manual trigger

jobs:
  download_extract_edit:
    runs-on: ubuntu-latest

    steps:
      - name: Download self-host.zip
        run: wget -O self-host.zip https://github.com/zardoy/minecraft-web-client/releases/latest/download/self-host.zip

      - name: Extract ZIP into root
        run: unzip -o self-host.zip -d ./

      - name: Remove pauseLinks from config.json
        run: |
          if [ -f ./dost/config.json ]; then
            jq 'del(.pauseLinks)' ./dost/config.json > ./dost/config.temp.json
            mv ./dost/config.temp.json ./dost/config.json
          else
            echo "config.json not found!"
          fi
